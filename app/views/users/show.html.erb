<div>
  <h2>Username:</h2>
  <p><%= @user.username %></p>
  <% if @user.ratings.empty? %>
    <p>Has not made any ratings yet!</p>
  <% else %>
    <p>Has made <%= pluralize(@user.ratings.count, 'rating') %>, average rating <%= round(@user.average_rating) %></p>
    <p>Favorite style is <%= @user.favorite_style.name %></p>
  <% end %>
</div>
<div>
  <% if current_user.admin? and (current_user != @user) %>
    <% if @user.active? %>
      <%= link_to "Disable account", toggle_activity_user_path(@user.id), data: { turbo_method: "post" }, class: "btn btn-primary" %>
    <% else %>
      <%= link_to "Activate account", toggle_activity_user_path(@user.id), data: { turbo_method: "post" }, class: "btn btn-success" %>
    <% end %>
  <% end %>
</div>
<div>
  <p>
    <strong>member of</strong>
  </p>
  <ul>
    <% @user.beer_clubs.each do |beer_club| %>
      <li id="<%= dom_id beer_club %>">
        <%= link_to beer_club.name, beer_club %>
      </li>
    <% end %>
  </ul>
  <p>
</div>
<div>
  <h3>ratings</h3>
  <ul>
    <%= turbo_frame_tag "ratings" do %>
      <% @user.ratings.each do |rating| %>
        <li>
          <%= link_to rating.to_s, rating, data: { turbo_frame: 'rating_details' } %>
          <% if @user == current_user %>
            <%= link_to "Delete", rating, data: {
              "turbo-method": :delete,
              "turbo_confirm": "Are you sure?"
            } %>
          <% end %>
        </li>
      <% end %>
    <% end %>
  </ul>
  <%= turbo_frame_tag "rating_details" do %>
  <% end %>
</div>
<div>
  <% if @user == current_user or current_user.admin? %>
    <%= link_to "Edit this user", edit_user_path(@user) %> |
  <% end %>
  <%= link_to "Back to users", users_path %>
  <% if @user == current_user %>
    <%= button_to "Destroy this user", @user, method: :delete, class: 'btn btn-danger' %>
  <% end %>
</div>
